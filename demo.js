const vault = require("./common/vault")
const utils = require("./common/utils");
const { factoryABI } = require("./common/constant");
const Web3 = require("web3");
const walletconnect = require("./common/walletconnect");
const ipfsC = require("./common/ipfs_common");
const constant = require("./common/constant");

async function main(){
    console.log(await vault.read("official/account"));
    // console.log(utils.signMetaDataMsg("bc", 0));
    // walletconnect.signMetaDataMsg("abccc",1,web3).then(console.log);
    //ipfsC.add("ABC").then(console.log);
    const salt = utils.numberToUint256("B80A95EE83FF3D3B");
    console.log(salt);
    const bytecode = "0x608060405234801561001057600080fd5b5061002d61002261003260201b60201c565b61003a60201b60201c565b6100fe565b600033905090565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050816000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b610aff8061010d6000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c8063150b7a021461006757806345718278146100975780634ab4da9b146100b3578063715018a6146100cf5780638da5cb5b146100d9578063f2fde38b146100f7575b600080fd5b610081600480360381019061007c91906105e9565b610113565b60405161008e919061078d565b60405180910390f35b6100b160048036038101906100ac919061066c565b610127565b005b6100cd60048036038101906100c8919061057a565b61013e565b005b6100d7610156565b005b6100e161016a565b6040516100ee919061073b565b60405180910390f35b610111600480360381019061010c919061054d565b610193565b005b600063150b7a0260e01b9050949350505050565b61012f610217565b61013a823383610295565b5050565b610146610217565b610151838383610295565b505050565b61015e610217565b6101686000610349565b565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b61019b610217565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16141561020b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610202906107a8565b60405180910390fd5b61021481610349565b50565b61021f61040d565b73ffffffffffffffffffffffffffffffffffffffff1661023d61016a565b73ffffffffffffffffffffffffffffffffffffffff1614610293576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161028a906107c8565b60405180910390fd5b565b600083905060005b8251811015610342578173ffffffffffffffffffffffffffffffffffffffff166323b872dd30868685815181106102d7576102d661099b565b5b60200260200101516040518463ffffffff1660e01b81526004016102fd93929190610756565b600060405180830381600087803b15801561031757600080fd5b505af115801561032b573d6000803e3d6000fd5b50505050808061033a90610923565b91505061029d565b5050505050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050816000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600033905090565b60006104286104238461080d565b6107e8565b9050808382526020820190508285602086028201111561044b5761044a6109fe565b5b60005b8581101561047b57816104618882610538565b84526020840193506020830192505060018101905061044e565b5050509392505050565b600061049861049384610839565b6107e8565b9050828152602081018484840111156104b4576104b3610a03565b5b6104bf8482856108e3565b509392505050565b6000813590506104d681610a9b565b92915050565b600082601f8301126104f1576104f06109f9565b5b8135610501848260208601610415565b91505092915050565b600082601f83011261051f5761051e6109f9565b5b813561052f848260208601610485565b91505092915050565b60008135905061054781610ab2565b92915050565b60006020828403121561056357610562610a0d565b5b6000610571848285016104c7565b91505092915050565b60008060006060848603121561059357610592610a0d565b5b60006105a1868287016104c7565b93505060206105b2868287016104c7565b925050604084013567ffffffffffffffff8111156105d3576105d2610a08565b5b6105df868287016104dc565b9150509250925092565b6000806000806080858703121561060357610602610a0d565b5b6000610611878288016104c7565b9450506020610622878288016104c7565b935050604061063387828801610538565b925050606085013567ffffffffffffffff81111561065457610653610a08565b5b6106608782880161050a565b91505092959194509250565b6000806040838503121561068357610682610a0d565b5b6000610691858286016104c7565b925050602083013567ffffffffffffffff8111156106b2576106b1610a08565b5b6106be858286016104dc565b9150509250929050565b6106d18161087b565b82525050565b6106e08161088d565b82525050565b60006106f360268361086a565b91506106fe82610a23565b604082019050919050565b600061071660208361086a565b915061072182610a72565b602082019050919050565b610735816108d9565b82525050565b600060208201905061075060008301846106c8565b92915050565b600060608201905061076b60008301866106c8565b61077860208301856106c8565b610785604083018461072c565b949350505050565b60006020820190506107a260008301846106d7565b92915050565b600060208201905081810360008301526107c1816106e6565b9050919050565b600060208201905081810360008301526107e181610709565b9050919050565b60006107f2610803565b90506107fe82826108f2565b919050565b6000604051905090565b600067ffffffffffffffff821115610828576108276109ca565b5b602082029050602081019050919050565b600067ffffffffffffffff821115610854576108536109ca565b5b61085d82610a12565b9050602081019050919050565b600082825260208201905092915050565b6000610886826108b9565b9050919050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b82818337600083830152505050565b6108fb82610a12565b810181811067ffffffffffffffff8211171561091a576109196109ca565b5b80604052505050565b600061092e826108d9565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8214156109615761096061096c565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160008201527f6464726573730000000000000000000000000000000000000000000000000000602082015250565b7f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572600082015250565b610aa48161087b565b8114610aaf57600080fd5b50565b610abb816108d9565b8114610ac657600080fd5b5056fea26469706673582212203b9e6a872b98e4d1a0808d3cf092abe92557b2b0a86d10be3f2a8892d085fe4964736f6c63430008070033"

    const a = utils.buildCreate2Address("0xfBa91F30e18A0Eb4F38f52D77baC360474cFFDcf",salt,bytecode)

    // const d = utils.encodeParamsABI(constant.factoryABI, [salt], "calculation");

    console.log(a);
    // 0x88d3675aa6fef851413e8779098f911d8b094b9d
    // 0x3066363465656633663061316338306162626237643030666138313130626231
}

main()
